<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="/css/efectoshoover.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <title>Carrito</title>
  </head>
  <body>

    <header>
      <nav class="navegador">
        <div class="imgLogo">
          <img
            src="/img/twitter_header_photo_1.png"
            alt="Imagen Logo Empresa"
          />
        </div>
        <div class="dropdown">
          <button
            class="btn btn-secondary"
            type="button"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            Detalle del Carrito
            <i
              class="bi bi-arrow-down"
              style="font-size: 24px; color: black;"
            ></i>
          </button>
          <ul class="dropdown-menu">
            <li><p><strong>Carrito Id:</strong> {{cartId}}</p></li>
            <li><p><strong>Role:</strong> {{user.role}}</p></li>
            <ul class="menu">
              <li>
                <a id="volverLink" href="#" data-rol="{{user.role}}">
                  <span>Volver</span>
                  <span>
                    <i class="bi bi-arrow-bar-left"></i>
                  </span>
                </a>
              </li>
            </ul>
          </ul>
        </div>
      </nav>
    </header>
    <main>
      <div class="contenedorCarrito">
        <div class="contenedorDescripcion">
        <div class="carritoVacio">
        </div>
          <table class="table table-info table-hover table-borderless">
            <thead>
              <tr>
                <th scope="col" class="encabezado"><strong
                  >PRODUCTO</strong></th>
                <th scope="col" class="encabezado"><strong
                  >DESCRIPCION</strong></th>
                <th scope="col" class="encabezado"><strong>PRECIO</strong></th>
                <th scope="col" class="encabezado"><strong>CÓDIGO</strong></th>
                <th scope="col" class="encabezado"><strong
                  >CANTIDAD</strong></th>
                <th scope="col" class="encabezado"><strong>TOTAL</strong></th>
                <th scope="col"></th>
              </tr>
            </thead>
            <tbody>
              {{#each products}}
                <tr>
                  <td>{{this.title}}</td>
                  <td>{{this.description}}</td>
                  <td>${{this.price}}</td>
                  <td>{{this.code}}</td>
                  <td class="cantidades">{{this.quantity}}</td>
                  <td id="totales" class="total">${{multiply
                      this.quantity
                      this.price
                    }}</td>
                  <td class="contenedorBotonesTabla">
            <button class="boton-carrito" onclick="agregarAlCarrito('{{../cartId}}', '{{this._id}}', '{{this.title}}')" data-hover="AGREGAR" >
              <div><span class="material-symbols-outlined">
                  <i class="bi bi-plus-square-fill"></i>
                </span></div>
            </button>
            <button class="boton-carrito" onclick="eliminarProductoDelCarrito('{{../cartId}}', '{{this._id}}', '{{this.title}}')" data-hover="ELIMINAR" >
              <div><span class="material-symbols-outlined">
                  <i class="bi bi-dash-square-fill"></i>
                </span></div>
            </button>
                  </td>
                </tr>
              {{/each}}
            </tbody>
          </table>
        </div>
        <div class="contenedorTotal">
          <div class="totalDeTotales"><h1>TOTAL: </h1></div>
          <div class="botonesDeTotal">
            <button id= "pagarBtn" class="boton-carrito" data-hover="PAGAR"  data-cart-id="{{cartId}}">
              <div><span class="material-symbols-outlined">
                  <i class="bi bi-wallet-fill"></i>
                </span></div>
            </button>
            <button class="boton-carrito" onclick="vaciarCarrito('{{cartId}}', '{{user.first_name}}')" data-hover="VACIAR CARRITO" >
              <div><span class="material-symbols-outlined">
                  <i class="bi bi-cart-x-fill"></i>
                </span></div>
            </button>
          </div>
        </div>
      </div>
    </main>
    <footer>
      <nav class="navegador">
        <div class="textoFooter">
          <h2>
            Proyecto Backend Nicolas Davi ©
          </h2>
        </div>
        <div class="iconosFooter">
          <i class="bi bi-twitter-x"></i>
          <i class="bi bi-instagram"></i>
          <i class="bi bi-facebook"></i>
          <i class="bi bi-whatsapp"></i>
        </div>
      </nav>
    </footer>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="/js/carrito.js"></script>
  </body>
</html>